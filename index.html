<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíåÿ®ÿ±ÿß€å ÿ¥ŸÖÿß ÿπÿ¥ŸÇŸÖ</title>
  <style>
    /* Mini player */
    .mini-player {
      position: sticky;      
      bottom: 0;
      margin-top: 16px;
      background: #fff0f6;
      border: 2px solid #ff99cc;
      border-radius: 14px;
      box-shadow: 0 6px 20px rgba(255,105,180,.15);
      padding: 10px 12px;
      max-width: none;
      width: 100%;
      box-sizing: border-box;
    }
    .mini-row { display: flex; align-items: center; gap: 10px; }
    .mini-title { font-weight: 700; color: #ff4da6; font-size: .95rem; flex: 1; min-width: 0; }
    .mini-title span { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; max-width: 100%; }
    .mini-btn {
      width: 36px; height: 36px; display: grid; place-items: center;
      border: none; border-radius: 50%; background: #ff99cc; color: #fff;
      cursor: pointer; font-size: 1.05rem; transition: transform .1s, background .2s;
    }
    .mini-btn:hover { transform: scale(1.06); background: #ff66b2; }
    .mini-vol { width: 140px; accent-color: #ff4da6; }
    .mini-small { color: #cc6699; font-size: .8rem; }

    :root {
      --bg: #fff5f7;
      --card: #ffffff;
      --ink: #2b2b2b;
      --accent: #ff5c8a;
      --muted: #7a7a7a;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink); background: var(--bg); overflow-x: hidden;
    }
    .wrap { max-width: 720px; margin: 0 auto; padding: 24px; }
    .card {
      background: var(--card); border-radius: 24px; padding: 28px; box-shadow: 0 10px 30px rgba(0,0,0,.08);
    }
    h1 { margin: 0 0 8px; font-size: 2.1rem; }
    p { line-height: 1.6; color: var(--ink); }
    .muted { color: var(--muted); }
    .center { text-align: center; }

    /* gate */
    .gate { display: grid; gap: 14px; justify-items: center; }
    .gate input[type=password] {
      width: 100%; max-width: 360px; padding: 14px 16px; border: 2px solid #ffd1de; border-radius: 14px; font-size: 1rem;
      outline: none; transition: box-shadow .2s, border-color .2s;
    }
    .gate input[type=password]:focus { border-color: var(--accent); box-shadow: 0 0 0 6px rgba(255,92,138,.12); }
    .btn {
      padding: 12px 18px; border: 0; border-radius: 14px; background: var(--accent); color: white; font-weight: 600; cursor: pointer; font-size: 1rem;
      box-shadow: 0 10px 20px rgba(255,92,138,.25); transition: transform .06s ease;
    }
    .btn:active { transform: translateY(1px); }
    .error { color: #c2185b; font-weight: 600; min-height: 1.2em; }

    /* secret content hidden by default */
    #secret { display: none; }
    body.open #secret { display: block; animation: pop .6s ease; }
    body.open #gate { display: none; }

    @keyframes pop { from { transform: scale(.98); opacity: 0 } to { transform: scale(1); opacity: 1 } }

    /* Floating hearts */
    .sky { position: fixed; inset: 0; overflow: hidden; pointer-events: none; }
    .heart { position: absolute; font-size: 18px; animation: floatUp linear forwards; opacity: .85; }
    @keyframes floatUp { to { transform: translateY(-110vh) rotate(360deg); opacity: 0 } }

    .gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-top: 14px; }
    .gallery img { width: 100%; height: 160px; object-fit: cover; border-radius: 16px; }

    .footer { text-align:center; color: var(--muted); font-size: .9rem; margin-top: 16px; }
      /* quiz styles */
    .quiz { margin-top: 18px; }
    .q-card { background: #fff8fb; border: 1px solid #ffd1de; border-radius: 16px; padding: 16px; }
    .q-title { font-weight: 700; margin: 0 0 12px; }
    .opts { display: grid; gap: 10px; margin-top: 10px; }
    .opt { padding: 12px 14px; border-radius: 12px; border: 2px solid #ffe1ea; background:#fff; cursor:pointer; text-align:left; font-size:1rem; }
    .opt:hover { border-color: var(--accent); }
    .opt.correct { border-color: #2ecc71; background: #ecfff3; }
    .opt.wrong { border-color: #e74c3c; background: #fff0f0; }
    .q-foot { display:flex; justify-content: space-between; align-items:center; margin-top: 12px; color: var(--muted); }
    .btn.secondary { background: #fff; color: var(--accent); border:2px solid var(--accent); }

    /* FINAL PAGE */
    body.final {
    /* üëá replace with your own image URL */
    background: url("https://images.unsplash.com/photo-1518148750000-38eac0f03511?q=80&w=1600&auto=format&fit=crop")
                center/cover fixed no-repeat;
    }

    /* blur the main card area when in final page */
    body.final .wrap { backdrop-filter: blur(2px); }

    #final {
    display: none;
    margin-top: 16px;
    }

    body.final #secret > .card:not(#final) { display: none; }
    body.final #final { display: block; }

    .ascii-box {
    background: rgba(255,255,255,0.9);
    border: 1px solid #ffd1de;
    border-radius: 16px;
    padding: 16px;
    overflow: auto;
    }
    .ascii {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    white-space: pre;
    line-height: 1.1;
    font-size: 12px;      /* adjust bigger/smaller if you like */
    }
    .final-actions { display: flex; gap: 10px; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="sky" aria-hidden="true" id="sky"></div>

  <div class="wrap">
    <!-- GATE (Password screen) -->
    <section id="gate" class="card gate">
      <h1>For you üíå</h1>
      <p class="muted">Enter our secret password</p>
      <input id="pw" type="password" placeholder="password" autocomplete="off" />
      <button class="btn" id="openBtn">Open</button>
      <div class="error" id="error"></div>
      <p class="muted" style="font-size:.9rem">üóùÔ∏è Tip: What is our name?</p>
    </section>

    <!-- SECRET (Your message and goodies) -->
    <section id="secret" class="card">
      <div class="center">
        <h1>Hi, <span id="Laila">love</span> ‚ù§Ô∏è</h1>
        <p>Hey, I made this just for you... maybe GPT helped a liiiiitle bit
        <br><em>Scroll down for a little surprise.</em></p>
      </div>

      <hr style="border:none;height:1px;background:#ffe1ea;margin:18px 0;" />

      <h2>My letter to you</h2>
      <p id="letter">
        How lucky am I to have someone that makes saying goodbye so difficult. 
        I'll always love you no matter what you do. I didn't fall in love with what you could give me.
        I fell in love with your soul. Mistakes or problems will never outweigh what you mean to me.
        Remember everything's gonna be alright even if it doesn't feel like it right now.
        I LOVE YOU, LAILA QASIMI!
      </p>

      <h2>Cool images that remind me of you!</h2>
      <div class="gallery" id="gallery">
        <!-- Replace the src URLs with your photos (can be absolute links) -->
        <img src="https://i.pinimg.com/1200x/b9/a5/a5/b9a5a5ab199cf14f2dc410931c96d0ed.jpg" alt="Us?" />
        <img src="https://static01.nyt.com/images/2012/12/16/world/gold/gold-superJumbo.jpg?quality=75&auto=webp" alt="Home sweet home!" />
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRVZ3HJIEI3yFErnUqfQFdacOgQjFz4hefcxA&s" alt="How I see you" />
      </div>

      <!-- Mini Music Player -->
      <div class="mini-player">
        <!-- Hidden audio element -->
        <audio id="bg-music" preload="metadata" muted playsinline></audio>

        <div class="mini-row" style="margin-bottom:6px;">
          <div class="mini-title">üéµ <span id="mp-title">‚Äî</span></div>
          <button class="mini-btn" id="mp-prev" title="Prev">‚èÆÔ∏è</button>
          <button class="mini-btn" id="mp-play" title="Play/Pause">‚ñ∂Ô∏è</button>
          <button class="mini-btn" id="mp-next" title="Next">‚è≠Ô∏è</button>
        </div>

        <div class="mini-row">
          <span class="mini-small" id="mp-status">Paused üíî</span>
          <div style="flex:1"></div>
          <input class="mini-vol" type="range" id="mp-vol" min="0" max="1" step="0.01" value="0.6">
          <span class="mini-small" id="mp-time">0:00 / 0:00</span>
        </div>
      </div>

      <h2 style="margin-top:18px">Little quiz/game</h2>
      <p class="muted">A few fun questions!! HIGH pressure, GET IT ALL RIGHT! üòä</p>
      <div id="quiz" class="quiz q-card">
        <div class="q-head"><span id="q-progress">Question 1/5</span></div>
        <h3 class="q-title" id="q-title">Loading‚Ä¶</h3>
        <div class="opts" id="q-opts"></div>
        <div class="q-foot">
          <span id="q-feedback"></span>
          <button class="btn secondary" id="nextBtn" disabled>Next</button>
        </div>
      </div>

      <div id="final" class="card">
      <h2 class="center">Final surprise ‚ú®</h2>
      <p class="center muted">Here is my heart for you Laila! (Very difficult to make btw) </p>

      <div class="ascii-box">
          <pre class="ascii">

                      |
                      ||
                  --\ \||
                   --\ \||
                    --\ \||
                     --\ \|
                      --\ \
                         \ \
                          \ \
                           \ \
                          MMMMMMMMM                         MMMMMMMMM
                      MMMMMMMMMMMMMMMMMM               MMMMMMMMMMMMMMMMMM
                   MMMMMMMXXXXXXXXXXMMMMMMM         MMMMMMMXXXXXXXXXXMMMMMMM
                MMMMMMXXXXXXXXXXXXXXXXXMMMMMM     MMMMMMXXXXXX:::::XXXXXXMMMMMM
               MMMMMXXXXXXXX::::::::XXXXXXMMMM   MMMMXXXXXX:::::::::::XXXXXMMMMM
              MMMMXXXXXXX:::::::::::::::XXXXMMM MMMXXXX::::::::::::::::::XXXXMMMM
             MMMMXXXXXX::::::::::::::::::::XXXMMMXXX:::::::::::.....:::::::XXXMMMM
             MMMXXXXX::::::::::::::::::::::::XXXXX:::::::::...........::::::XXXMMM
            MMMXXXXX:::::::::::.......:::::::::X::::::::......    ......::::XXXXMMM
            MMMXXXX:::::::::..............:::::::::::.......         ....::::XXXMMM
            MMMXXXX::::::::..................:::::.......             ...::::XXXMMM
            MMMXXXX:::::::.....................:............         ....::::XXXMMM
            MMMXXXX:::::::....................................       ....::::XXXMMM
            MMMXXXX:::::::......................................    .....::::XXXMMM
            MMMXXXXX::::::....................................... ......::::XXXXMMM
            MMMMXXXX:::::::.............................................::::XXXMMMM
             MMMXXXX::::::::............................................::::XXXMMM
             MMMMXXXX::::::::..........................................::::XXXMMMM
              MMMXXXX::::::::::.......................................:::::XXXMMM
              MMMMXXXX:::::::::::...................................::::::XXXMMMM
               MMMXXXXX::::::::::::..............................::::::::XXXXMMM
               MMMMXXXXX:::::::::::::.........................::::::::::XXXXMMMM
                MMMMXXXXX:::::::::::::::...................::::::::::::XXXXMMMM
                 MMMMXXXXX:::::::::::::::::.............::::::::::::::XXXXMMMM
                  MMMMXXXXXX::::::::::::::::::.......::::::::::::::XXXXXXMMMM
                   MMMMXXXXXXXX::::::::::::::::...::::::::::::::XXXXXXXXMMMM
                     MMMMXXXXXXXXX::::::::::::::::::::::\::::XXXXXXXXXMMMM
                       MMMMMXXXXXXXXXX:::::::::::::::::\ \XXXXXXXXXMMMMM
                          MMMMMMXXXXXXXXXXX:::::::::XXXX\ \XXXXMMMMMM
                              MMMMMMXXXXXXXXXXX:XXXXXXXXX\ \MMMMM
                                  MMMMMMXXXXXXXXXXXXXXXMMM\ \
                                      MMMMMMXXXXXXXMMMMMM  \ \
                                          MMMMMXMMMMM       \ \
                                             MMMMM           \ \   \
                                              MMM             \ \ \\
                                               M             \\\\\\\
                                                               \\\\\
                                                                 \\\
                                                                   \
          </pre>
      </div>

    <div class="final-actions">
        <button class="btn secondary" onclick="exitFinal()">Back</button>
        <button class="btn" onclick="spawnHearts()">More hearts</button>
    </div>
    </div>


      <div class="footer">Made with ‚ù§Ô∏è by <span id="Ilan">you</span>
        ¬∑ <a href="#" onclick="logout();return false;">Lock again</a>
      </div>Made with ‚ù§Ô∏è by ME!!!! <span id="Ilan"></span>
        ¬∑ <a href="#" onclick="logout();return false;">Lock again</a>
      </div>

    </section>
  </div>

  <script>
    // ==========================
    // 1) SETUP ‚Äî EDIT THESE
    // ==========================
    // Put the SHA-256 hash of your password here. (Not the raw password!)
    // How to generate quickly:
    //  - Open this page locally in your browser, press F12, paste: sha256("your_password")
    //  - Copy the result and paste into CORRECT_HASH below, then reload the page.
    const CORRECT_HASH = "68a554a4134e8d408eb8d13ebe3d70be71f618ebe8280a4845cbddb8b5382b72";
    // Optional: personalize names shown on the page
    const HER_NAME = "Laila";
    const YOUR_NAME = "Ilan";

    // ==========================
    // 2) PASSWORD CHECK
    // ==========================
    const pwInput = document.getElementById('pw');
    const btn = document.getElementById('openBtn');
    const err = document.getElementById('error');

    document.getElementById('Laila').textContent = HER_NAME;
    document.getElementById('Ilan').textContent = YOUR_NAME;

    async function sha256(str){
      const buf = new TextEncoder().encode(str);
      const hash = await crypto.subtle.digest('SHA-256', buf);
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2,'0')).join('');
    }

    async function unlock(){
      const value = pwInput.value.trim();
      if(!value){ err.textContent = ""; return; }
      const h = await sha256(value);
      if(h === CORRECT_HASH){
        // open the surprise
        document.body.classList.add('open');
        spawnHearts();
        setTimeout(spawnHearts, 600);
        setTimeout(spawnHearts, 1200);
        err.textContent = "";
        // wipe the input for privacy
        pwInput.value = "";
        // Optionally remember open state in this session
        sessionStorage.setItem('val_open', '1');
      } else {
        err.textContent = "Nope ‚Äî try again üíå";
      }
    }

    btn.addEventListener('click', unlock);
    pwInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') unlock(); });

    // Persist open state within a single tab session
    if(sessionStorage.getItem('val_open') === '1'){
      document.body.classList.add('open');
    }

    function logout(){
      sessionStorage.removeItem('val_open');
      document.body.classList.remove('open');
      // scroll to top just in case
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ==========================
    // 3) FUN: FLOATING HEARTS
    const sky = document.getElementById('sky');
    function spawnHearts(){
      for(let i=0;i<18;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        h.textContent = Math.random() < .3 ? 'üíó' : (Math.random() < .5 ? 'üíñ' : 'üíû');
        const left = Math.random()*100;      // vw
        const dur = 7 + Math.random()*6;     // seconds
        const size = 16 + Math.random()*22;  // px
        h.style.left = left + 'vw';
        h.style.bottom = '-40px';
        h.style.fontSize = size + 'px';
        h.style.animationDuration = dur + 's';
        sky.appendChild(h);
        setTimeout(()=> h.remove(), dur*1000);
      }
    }

    // ==========================
    // 4) QUIZ / QUESTIONS GAME
    // ==========================
    // Edit these questions to make it personal! "correct" is the index in options.
    const QUESTIONS = [
      { q: "Where did we first hang out?", options: ["Library", "Rehua", "UCSA", "Jack Erskine"], correct: 1 },
      { q: "Where was I born?", options: ["Santos", "Guaruja", "S√£o Paulo", "Christchurch"], correct: 0 },
      { q: "Which song reminds me of you the most?", options: ["S√≥ N√≥s Dois", "Mahtabe Man", "Understand", "FE!N"], correct: 0 },
      { q: "My favourite Hobby?", options: ["Surfing", "Playing the Guitar", "Games", "Gym"], correct: 1 },
      { q: "What day did we first start talking?", options: ["14th of April", "15th of April", "17th of April", "18th of April"], correct: 2 },
      { q: "Who is the best football player you know?", options: ["Neymar", "CR7", "Messi", "Ilan 'goat' Germano"], correct: 3 },
      { q: "What day did I give you the ring?", options: ["13th of August", "14th of August", "15th of August", "16th of August"], correct: 2 },
      { q: "Where was our first date?", options: ["Demon Slayer Movie", "Ilam Garden", "West Building", "Rehua (vending machines)"], correct: 3 }
    ];

    const qTitle = document.getElementById('q-title');
    const qOpts = document.getElementById('q-opts');
    const qProgress = document.getElementById('q-progress');
    const qFeedback = document.getElementById('q-feedback');
    const nextBtn = document.getElementById('nextBtn');

    let qi = 0; // current question index
    let score = 0;
    let locked = false;

    function renderQuestion(){
      const { q, options } = QUESTIONS[qi];
      qTitle.textContent = q;
      qProgress.textContent = `Question ${qi+1}/${QUESTIONS.length}`;
      qFeedback.textContent = '';
      nextBtn.disabled = true;
      locked = false;
      qOpts.innerHTML = '';
      options.forEach((text, idx)=>{
        const b = document.createElement('button');
        b.className = 'opt';
        b.textContent = text;
        b.addEventListener('click', ()=> choose(idx, b));
        qOpts.appendChild(b);
      });
    }
    
    // ===== Mini Music Player =====
    (function(){
      // If your songs are in Gift/music/, these relative paths are correct:
      const playlist = [
        { src: "music/ThisGirl.mp3",   title: "This Girl is Mine ‚Äî Michael Jackson & Paul McCartney" },
        { src: "music/Understand.mp3", title: "Understand ‚Äî Keshi" },
        { src: "music/SoNosDois.mp3",  title: "S√≥ N√≥s Dois ‚Äî Tim Bernardes" }
      ];

      const audio = document.getElementById("bg-music");
      const titleEl = document.getElementById("mp-title");
      const statusEl = document.getElementById("mp-status");
      const timeEl = document.getElementById("mp-time");
      const btnPrev = document.getElementById("mp-prev");
      const btnPlay = document.getElementById("mp-play");
      const btnNext = document.getElementById("mp-next");
      const vol = document.getElementById("mp-vol");

      if (!audio) return; // safety if block not present

      let i = 0;
      let userGesture = false;

      // Persist volume
      const saved = localStorage.getItem("mini.vol");
      audio.volume = saved ? Number(saved) : Number(vol.value);
      if (saved) vol.value = saved;

      function fmt(t){
        t = Math.max(0, t|0);
        const m = (t/60)|0, s = (t%60)|0;
        return `${m}:${s.toString().padStart(2,'0')}`;
      }

      function updateTime(){
        const cur = audio.currentTime||0, dur = audio.duration||0;
        timeEl.textContent = `${fmt(cur)} / ${isFinite(dur)?fmt(dur):"0:00"}`;
      }

      function setStatus(){
        const playing = !audio.paused && !audio.ended;
        statusEl.textContent = playing ? "Playing üíû" : "Paused üíî";
        btnPlay.textContent = playing ? "‚è∏Ô∏è" : "‚ñ∂Ô∏è";
      }

      function load(n, {autoplay=false} = {}){
        i = (n + playlist.length) % playlist.length;
        const tr = playlist[i];
        audio.src = tr.src;
        audio.load();
        titleEl.textContent = tr.title;
        setStatus(); updateTime();
        if (autoplay && userGesture) {
          audio.muted = false;
          audio.play().catch(()=>{});
        }
      }

      // Controls
      btnPlay.addEventListener("click", ()=>{
        userGesture = true;
        if (audio.paused) { audio.muted = false; audio.play().catch(()=>{}); }
        else { audio.pause(); }
        setStatus();
      });
      btnPrev.addEventListener("click", ()=>{ userGesture = true; load(i-1, {autoplay:true}); });
      btnNext.addEventListener("click", ()=>{ userGesture = true; load(i+1, {autoplay:true}); });
      vol.addEventListener("input", ()=>{ audio.volume = Number(vol.value); localStorage.setItem("mini.vol", vol.value); });

      // Events
      audio.addEventListener("timeupdate", updateTime);
      audio.addEventListener("loadedmetadata", updateTime);
      audio.addEventListener("play", setStatus);
      audio.addEventListener("pause", setStatus);
      audio.addEventListener("ended", ()=> load(i+1, {autoplay:true}));

      // First load
      load(0);
    })();
    function choose(idx, btnEl){
      if(locked) return;
      locked = true;
      const correct = QUESTIONS[qi].correct;
      // mark selections
      [...qOpts.children].forEach((el, i)=>{
        if(i === correct) el.classList.add('correct');
        if(i === idx && idx !== correct) el.classList.add('wrong');
        el.disabled = true;
      });
      if(idx === correct){
        score += 1;
        qFeedback.textContent = 'Correct! üíñ';
        spawnHearts();
      } else {
        qFeedback.textContent = "WRONG but it's ok... üíû";
      }
      nextBtn.disabled = false;
    }

    nextBtn.addEventListener('click', ()=>{
      if(qi < QUESTIONS.length - 1){
        qi += 1;
        renderQuestion();
      } else {
        finishQuiz();
      }
    });

    function finishQuiz(){
    const total = QUESTIONS.length;
    const pct = Math.round((score/total)*100);
    const msg = pct === 100 ? `Soulmate status unlocked, ${HER_NAME}! ‚ú®` :
                pct >= 60 ? `We know each other so well üíó (${score}/${total})` :
                `Cute! Now you know me a little better ü•∞ (${score}/${total})`;
    qTitle.textContent = 'Results';
    qOpts.innerHTML = `
        <div class="q-card" style="background:#fff;border:1px dashed #ffd1de;text-align:center;">
        <p style="font-size:1.05rem;">${msg}</p>
        <p class="muted">Ready for the last reveal?</p>
        <div style="display:flex;gap:10px;justify-content:center;margin-top:8px;">
            <button class="btn secondary" id="playAgainBtn">Play again</button>
            <button class="btn" id="finalBtn">Final surprise ‚Üí</button>
        </div>
        </div>`;
    qFeedback.textContent = '';
    nextBtn.style.display = 'none';  // hide the old Next button

    // Wire up buttons
    const playAgainBtn = document.getElementById('playAgainBtn');
    const finalBtn = document.getElementById('finalBtn');

    playAgainBtn.onclick = ()=>{ qi = 0; score = 0; nextBtn.style.display = ''; renderQuestion(); };
    finalBtn.onclick = ()=> { window.location.href = "heart.html"; };
    }

    function goToFinal(){
    document.body.classList.add('final');  // applies the background + shows #final
    // optional: auto-spawn some hearts
    spawnHearts();
    setTimeout(spawnHearts, 800);
    }

    // Exit final page back to the main secret content
    function exitFinal(){
    document.body.classList.remove('final');
    }

    // render first question when page opens
    if(document.body.classList.contains('open')){
      renderQuestion();
    }
    // also render when unlocked
    const unlockObserver = new MutationObserver(()=>{
      if(document.body.classList.contains('open')){ renderQuestion(); }
    });
    unlockObserver.observe(document.body, { attributes:true, attributeFilter:['class'] });
  </script>
</body>
</html>



